<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/emailjs.min.js"></script>
<script>
    emailjs.init("NwoK6YXyku3aP_dG8");

    // Handle form submit
    document.getElementById('inquiryForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const message = document.getElementById('message').value;
        
        const templateParams = {
            from_name: name,
            from_email: email,
            message: message
        };
        
        // Send to admin first
        emailjs.send("service_72cpkgi", "template_p8smz67", templateParams)
            .then(function() {
                // Send auto-reply to user
                const userParams = {
                    to_email: email,  // User की email
                    from_name: name,
                    from_email: email,
                    message: message
                };
                return emailjs.send("service_72cpkgi", "template_auto_reply", userParams);  // New template ID
            })
            .then(function() {
                alert('Inquiry submitted! Email sent successfully.');
                // Save locally
                const inquiries = JSON.parse(localStorage.getItem('inquiries')) || [];
                inquiries.push({ name, email, message });
                localStorage.setItem('inquiries', JSON.stringify(inquiries));
                loadInquiries();
                document.getElementById('inquiryForm').reset();
            })
            .catch(function(error) {
                alert('Failed to send email. Please try again.');
                console.log('EmailJS error:', error);
            });
    });

    // Load inquiries
    function loadInquiries() {
        const inquiries = JSON.parse(localStorage.getItem('inquiries')) || [];
        const list = document.getElementById('inquiryList');
        if (list) {
            list.innerHTML = '';
            inquiries.forEach(inq => {
                const div = document.createElement('div');
                div.className = 'inquiry';
                div.innerHTML = `<strong>${inq.name}</strong> (${inq.email}): ${inq.message}`;
                list.appendChild(div);
            });
        }
    }

    window.onload = loadInquiries;
</script>
